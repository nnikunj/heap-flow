global
  #debug

defaults
  mode http
  timeout connect 5000ms
  timeout client 50000ms
  timeout server 50000ms

frontend heap_http
  mode http
  bind *:80 name heap
  
  default_backend heap_ui
  use_backend heap_report if { path_beg /api/rpts }
  use_backend heap_flow if { path_beg /api/v1 }
  
  
backend heap_report
  server heap_report_ser_1 heap-flow-rpt:8443

backend heap_flow
  server heap_flow_ser_1 heap-flow-app:9443
  
backend heap_ui
  server heap_ui_ser_1 dashboard:80